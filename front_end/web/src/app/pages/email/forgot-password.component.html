<div class="page">
  <div class="hero">
    <div class="hero__icon">
      <mat-icon>lock_reset</mat-icon>
    </div>

    <div class="hero__text">
      <h1>Mot de passe oublié</h1>
      <p>
        Entre ton e-mail. Si un compte existe, tu recevras un lien pour réinitialiser ton mot de passe.
      </p>
    </div>
  </div>

  <mat-card class="card" appearance="outlined">
    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="submit()" class="form">

        <mat-form-field appearance="outline" class="full">
          <mat-label>Adresse e-mail</mat-label>

          <mat-icon matPrefix>alternate_email</mat-icon>

          <input
            matInput
            formControlName="email"
            type="email"
            autocomplete="email"
            placeholder="ex: Clement.Entone@gmail.com"
          />

          <mat-hint>On ne dira jamais si l’e-mail existe ou non.</mat-hint>

          <mat-error *ngIf="form.controls.email.hasError('required')">
            Email requis
          </mat-error>
          <mat-error *ngIf="form.controls.email.hasError('email')">
            Email invalide
          </mat-error>
        </mat-form-field>

        <button
          mat-flat-button
          color="primary"
          class="cta full"
          type="submit"
          [disabled]="loading() || form.invalid"
        >
          <mat-icon *ngIf="!loading()">send</mat-icon>

          <span *ngIf="!loading()">Envoyer le lien</span>

          <span class="cta__loading" *ngIf="loading()">
            <mat-spinner diameter="18"></mat-spinner>
            <span>Envoi…</span>
          </span>
        </button>

        <div class="notice" *ngIf="msg()" [class.notice--ok]="true">
          <mat-icon>info</mat-icon>
          <span>{{ msg() }}</span>
        </div>

        <div class="actions">
          <a mat-stroked-button routerLink="/login">
            <mat-icon>arrow_back</mat-icon>
            Retour connexion
          </a>

          <a mat-button routerLink="/register">
            Créer un compte
          </a>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <div class="footer-hint">
    <mat-icon>security</mat-icon>
    <span>Pour ta sécurité, le lien expire après un certain temps.</span>
  </div>
</div>
