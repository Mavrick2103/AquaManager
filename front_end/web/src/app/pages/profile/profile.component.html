<a class="brand" routerLink="/">
    <img src="/Logo_AquaManger.png" alt="AquaManager" class="logo" />
  </a>
<mat-card class="profile-card">
  <h1>Mon profil</h1>
  <p class="hint">Modifiez vos informations puis cliquez sur <strong>Enregistrer</strong>.</p>

  <form [formGroup]="form" class="grid">
    <!-- Nom complet -->
    <div class="row">
      <div class="label">
        <mat-icon>badge</mat-icon>
        <span>Nom complet</span>
      </div>

      <mat-form-field appearance="outline" class="field">
        <input matInput formControlName="fullName" maxlength="80" />
        <mat-hint align="end">{{ fullNameCtrl.value.length || 0 }} / 80</mat-hint>
      </mat-form-field>
    </div>

    <mat-divider></mat-divider>

    <!-- Email -->
    <div class="row">
      <div class="label">
        <mat-icon>mail</mat-icon>
        <span>Email</span>
      </div>

      <mat-form-field appearance="outline" class="field">
        <input matInput type="email" formControlName="email" maxlength="160" />
        <mat-error *ngIf="emailCtrl.invalid && emailCtrl.touched">Email invalide</mat-error>
      </mat-form-field>
    </div>

    <mat-divider></mat-divider>

    <!-- Mot de passe -->
    <div class="row">
      <div class="label">
        <mat-icon>password</mat-icon>
        <span>Mot de passe</span>
      </div>

      <div class="field grid-2">
        <mat-form-field appearance="outline">
          <mat-label>Mot de passe actuel (si requis)</mat-label>
          <input matInput type="password" formControlName="currentPassword" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nouveau mot de passe</mat-label>
          <input matInput type="password" formControlName="newPassword" />
          <mat-hint>6 caractères minimum</mat-hint>
        </mat-form-field>
      </div>
    </div>
  </form>

  <div class="actions">
    <button mat-stroked-button (click)="reset()" [disabled]="loading">
      <mat-icon>refresh</mat-icon> Annuler
    </button>

    <button mat-flat-button color="primary"
            (click)="saveAll()"
            [disabled]="loading || form.invalid || !hasChanges">
      <mat-icon *ngIf="!loading">save</mat-icon>
      <mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="18"></mat-progress-spinner>
      Enregistrer
    </button>
  </div>
</mat-card>

<mat-card class="danger-card">
  <h2>Zone dangereuse</h2>
  <p>La suppression de votre compte est <strong>définitive</strong>. Toutes vos données associées seront supprimées.</p>
  <button mat-flat-button color="warn" (click)="deleteAccount()">
    <mat-icon>delete_forever</mat-icon>
    Supprimer mon compte
  </button>
</mat-card>
