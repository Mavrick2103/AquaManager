<mat-toolbar class="topbar">
  <div class="brand">
    <img src="/Logo_AquaManger.png" alt="AquaManager" class="logo-img" />
  </div>

  <span class="spacer"></span>

  <button
    mat-icon-button
    aria-label="Fiches poissons et plantes"
    matTooltip="Fiches poissons & plantes"
    matTooltipPosition="below"
    routerLink="/species"
    class="species-btn"
  >
    <mat-icon>menu_book</mat-icon>
  </button>

  <button
    mat-icon-button
    aria-label="Conseils"
    matTooltip="Conseils"
    matTooltipPosition="below"
    routerLink="/articles"
    class="help-btn"
  >
    <mat-icon>tips_and_updates</mat-icon>
  </button>

  <button
    mat-icon-button
    aria-label="Profil"
    [routerLink]="'/profile'"
    class="profile-btn"
  >
    <mat-icon>account_circle</mat-icon>
  </button>
</mat-toolbar>

<!-- ===== Bandeau annonce (dÃ©filement) ===== -->
<div class="announce" role="status" aria-live="polite">
  <div class="announce__track">
    <span class="announce__item">
      ğŸš§ AquaManager est en cours de dÃ©veloppement â€” certaines fonctionnalitÃ©s peuvent changer. Merci pour votre patience !
    </span>
    <!-- duplication pour boucle fluide -->
    <span class="announce__item" aria-hidden="true">
      ğŸš§ AquaManager est en cours de dÃ©veloppement â€” certaines fonctionnalitÃ©s peuvent changer. Merci pour votre patience !
    </span>
  </div>
</div>


<main class="home-main">
  <section class="hero">
    <p class="hello" *ngIf="userFullName">Bonjour {{ userFullName }} ğŸ‘‹</p>
    <h1>GÃ©rez vos aquariums en toute clartÃ©</h1>
    <p class="subtitle">
      Suivi des paramÃ¨tres, entretiens planifiÃ©s, historique â€” tout au mÃªme endroit.
    </p>
    <div class="cta-row">
      <button mat-raised-button routerLink="/aquariums">Mes aquariums</button>
      <button mat-raised-button routerLink="/calendar">Calendrier</button>
    </div>
  </section>

  <!-- KPI -->
  <section class="grid">
    <div class="card kpi -today" routerLink="/calendar">
      <div class="kpi-value">{{ todayTasksCount }}</div>
      <div class="kpi-label">TÃ¢ches aujourdâ€™hui</div>
    </div>

    <div class="card kpi">
      <div class="kpi-value">{{ monthlyMeasurementsCount}}</div>
      <div class="kpi-label">Mesures dâ€™eau ce mois-ci</div>
    </div>

    <div class="card kpi">
      <div class="kpi-value">{{ upcomingTasks.length }}</div>
      <div class="kpi-label">TÃ¢ches Ã  venir (7j)</div>
    </div>
  </section>

  <section class="activity-grid">
    <section class="card activity">
      <h2>DerniÃ¨res activitÃ©s</h2>
      <ul class="activity-list">
        <li *ngFor="let t of latestActivities">
          <mat-icon>{{ typeIcon(t.type) }}</mat-icon>
          <span class="txt">
            <strong>{{ t.title || typeLabel(t.type) }}</strong>
            <ng-container *ngIf="t.aquarium?.name"> â€” {{ t.aquarium?.name }}</ng-container>
          </span>
          <span class="time">{{ whenLabel(t) }}</span>
        </li>
        <li *ngIf="!latestActivities.length">
          <mat-icon>info</mat-icon>
          Aucune activitÃ© rÃ©cente
        </li>
      </ul>
    </section>

    <section class="card activity">
      <h2>ActivitÃ©s Ã  venir</h2>
      <ul class="activity-list">
        <li *ngFor="let t of upcomingTasks">
          <mat-icon>{{ typeIcon(t.type) }}</mat-icon>
          <span class="txt">
            <strong>{{ t.title }}</strong>
            <ng-container *ngIf="t.aquarium?.name"> â€” {{ t.aquarium?.name }}</ng-container>
          </span>
          <span class="time">{{ whenLabel(t) }}</span>
        </li>

        <li *ngIf="!upcomingTasks.length">
          <mat-icon>check_circle</mat-icon>
          Aucune activitÃ© prÃ©vue dans les 7 jours
        </li>
      </ul>
    </section>
  </section>

  <section class="calendar-wrap">
    <app-week-calendar></app-week-calendar>
  </section>
</main>

<!-- ===== Footer ===== -->
<footer class="footer">
  <div class="footer-content">
    <div class="footer-brand">
      <img src="/Logo_AquaManger.png" alt="AquaManager" class="footer-logo" />
      <p class="footer-desc">
        AquaManager â€“ Suivez, entretenez et sublimez vos aquariums en toute simplicitÃ© ğŸŒ¿ğŸ 
      </p>
    </div>

    <div class="footer-links">
      <h3>Navigation</h3>
      <ul>
        <li><a routerLink="/a-propos-gestion-aquarium">A Propos</a></li>
        <li><a routerLink="/home">Accueil</a></li>
        <li><a routerLink="/aquariums">Mes aquariums</a></li>
        <li><a routerLink="/calendar">Calendrier</a></li>
        <li><a routerLink="/profile">Profil</a></li>
      </ul>
    </div>

    <div class="footer-links">
      <h3>LÃ©gal</h3>
      <ul>
        <li><a routerLink="/legal">Mentions lÃ©gales</a></li>
        <li><a routerLink="/privacy">Politique de confidentialitÃ©</a></li>
        <li><a routerLink="/terms">CGU</a></li>
        <a routerLink="/contact" class="footer-policy">Contact</a>
      </ul>
    </div>

    <div class="footer-social">
      <h3>Suivez-nous</h3>
      <div class="social-icons">
        <!--<a href="#" aria-label="Facebook"><mat-icon>facebook</mat-icon></a>-->
        <a href="https://www.instagram.com/aquamanager_france/" aria-label="Instagram"><mat-icon>photo_camera</mat-icon></a>
        <!--<a href="#" aria-label="Twitter"><mat-icon>alternate_email</mat-icon></a>-->
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="footer-bottom">
    <p>Â© {{ today.getFullYear() }} AquaManager â€” Tous droits rÃ©servÃ©s</p>

    <div class="footer-legal">
      <a routerLink="/legal" class="footer-policy">Mentions lÃ©gales</a>
      <span class="sep">â€¢</span>
      <a routerLink="/privacy" class="footer-policy">ConfidentialitÃ©</a>
      <span class="sep">â€¢</span>
      <a routerLink="/terms" class="footer-policy">CGU</a>
    </div>
  </div>
</footer>
