:host{
  display:block;
  box-sizing:border-box;
}

/* ✅ évite les débordements horizontaux (le “jeu latéral”) */
*, *::before, *::after{
  box-sizing:border-box;
}

.dlg-title{
  display:flex;
  align-items:center;
  gap:.55rem;
  font-weight:900;
}

.dlg-content{
  padding-top:.25rem;
  overflow-x:hidden; /* ✅ stop le scroll horizontal */
}

.form{
  display:grid;
  gap:1rem;
  width:100%;
  max-width:100%;
}

.section{
  border:1px solid rgba(0,0,0,.08);
  border-radius:16px;
  background:#fff;
  padding:.9rem .9rem .8rem;
  box-shadow:0 10px 22px rgba(0,0,0,.05);
  width:100%;
  max-width:100%;
  overflow:hidden;
}

.section-title{
  display:flex;
  align-items:flex-start;
  gap:.65rem;
  margin-bottom:.75rem;

  .ttl{ font-weight:900; line-height:1.1; }
  .sub{ font-size:.85rem; opacity:.75; margin-top:.1rem; }
  .spacer{ flex:1; }
}

.row{ display:grid; gap:.75rem; }
.row--2{ grid-template-columns:1fr 1fr; }

.sep{ margin:.25rem 0; opacity:.6; }

mat-form-field{
  width:100%;
  max-width:100%;
  min-width:0;
}

/* ✅ petit bloc “info / exemple” */
.hint-card{
  display:flex;
  align-items:flex-start;
  gap:.55rem;
  padding:.75rem;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.08);
  background:linear-gradient(135deg,#fbfffd,#f3fbff);
  color:rgba(0,0,0,.75);

  mat-icon{
    opacity:.8;
    margin-top:.05rem;
  }

  b{ font-weight:900; }
}

/* -------- Repeat -------- */
.repeat-head{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.75rem;
  align-items:center;
}
.repeat-mode.disabled{ opacity:.6; }

.week{
  margin-top:.75rem;
  background:linear-gradient(135deg,#f2fff6,#f2fbff);
  border:1px solid rgba(0,0,0,.08);
  border-radius:14px;
  padding:.75rem;
  width:100%;
  overflow:hidden;
}

.week-label{
  display:flex;
  align-items:center;
  gap:.45rem;
  font-weight:800;
  margin-bottom:.5rem;
}

.chips{
  display:flex;
  flex-wrap:wrap;
  gap:.45rem;
  max-width:100%;
}

.day{
  border:1px solid rgba(0,0,0,.12);
  background:#fff;
  border-radius:999px;
  padding:.35rem .7rem;
  font-weight:800;
  cursor:pointer;
  transition: transform .06s ease, box-shadow .18s ease, background .18s ease;

  &:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.08); }
  &.on{ background:rgba(0,159,227,.10); border-color:rgba(0,159,227,.35); }
}

.week-note{
  margin-top:.5rem;
  display:flex;
  align-items:center;
  gap:.45rem;
  font-size:.85rem;
  opacity:.8;
}

/* -------- Fert -------- */
.fert-list{
  display:grid;
  gap:.75rem;
  width:100%;
  max-width:100%;
}

.fert-row{
  display:grid;
  grid-template-columns:
    minmax(0, 1.35fr)
    minmax(0, .9fr)
    minmax(0, .55fr)
    44px;
  gap:.65rem;
  align-items:center;
  width:100%;
  max-width:100%;
}

.fert-row > *{
  min-width:0;
}

.trash{
  justify-self:end;
  align-self:center;
  border-radius:12px;
}

.fert-qty input[type="number"]{
  width:100%;
  max-width:100%;
  box-sizing:border-box;
  padding-right:28px;
}

.fert-qty input[type="number"]::-webkit-inner-spin-button,
.fert-qty input[type="number"]::-webkit-outer-spin-button{
  opacity:1;
}

:host ::ng-deep .fert-name .mat-mdc-form-field-infix,
:host ::ng-deep .fert-qty  .mat-mdc-form-field-infix,
:host ::ng-deep .fert-unit .mat-mdc-form-field-infix{
  width:100%;
  min-width:0;
}

/* -------- Errors -------- */
.form-error{
  display:flex;
  align-items:center;
  gap:.5rem;
  padding:.55rem .7rem;
  border-radius:12px;
  background:rgba(244,67,54,.08);
  border:1px solid rgba(244,67,54,.18);
  color:#b71c1c;
}

/* -------- Actions -------- */
.actions{
  padding:1rem;
  display:flex;
  gap:.6rem;
  justify-content:flex-end;
}

/* -------- Responsive -------- */
@media (max-width: 760px){
  .row--2{ grid-template-columns:1fr; }
  .repeat-head{ grid-template-columns:1fr; }

  .fert-row{
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "name name"
      "qty  unit"
      "trash trash";
    column-gap:.6rem;
    row-gap:.6rem;
  }

  .fert-name{ grid-area:name; }
  .fert-qty{ grid-area:qty; }
  .fert-unit{ grid-area:unit; }
  .trash{ grid-area:trash; justify-self:end; }

  .actions{
    flex-direction:column;
    align-items:stretch;

    button{
      width:100%;
      justify-content:center;
    }
  }
}
