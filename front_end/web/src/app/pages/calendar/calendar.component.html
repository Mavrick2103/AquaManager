<section class="cal">
  <header class="cal__head">
    <button mat-icon-button aria-label="Mois précédent" (click)="prevMonth()"><mat-icon>chevron_left</mat-icon></button>
    <h1 class="cal__title">{{ fmt(currentMonth(),'MMMM yyyy') | titlecase }}</h1>
    <div class="cal__actions">
      <button mat-stroked-button (click)="thisMonth()">Aujourd’hui</button>
      <button mat-icon-button aria-label="Mois suivant" (click)="nextMonth()"><mat-icon>chevron_right</mat-icon></button>
    </div>
  </header>

  <div class="cal__grid" role="grid" aria-label="Calendrier mensuel">
    <div class="cal__dow" *ngFor="let d of ['Lun','Mar','Mer','Jeu','Ven','Sam','Dim']">{{ d }}</div>

    <ng-container *ngFor="let week of weeks()">
      <button class="cal__cell"
              *ngFor="let day of week"
              role="gridcell"
              [class.-out]="!isSameMonth(day)"
              [class.-today]="isToday(day)"
              (click)="openCreate(day)">
        <span class="cal__day">{{ fmt(day,'d') }}</span>
        <ul class="cal__tasks">
          <li *ngFor="let t of dayTasks(day)" [title]="t.title + ' – ' + (t.aquarium?.name || '')">
            <span class="dot"></span> {{ t.title }}
          </li>
        </ul>
      </button>
    </ng-container>
  </div>
</section>
