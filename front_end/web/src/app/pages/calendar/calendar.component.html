<section class="toolbar">
  <a class="brand" routerLink="/">
    <img src="/Logo_AquaManger.png" alt="AquaManager" class="logo" />
  </a>

  <h1>Mon calendrier</h1>

  <button mat-raised-button class="btn-primary" (click)="openCreateQuick()">
    <mat-icon>add</mat-icon>
    <span>Nouvelle tÃ¢che</span>
  </button>
</section>

<div class="page-wrap">
  <section class="cal -compact">
    <header class="cal__head">
      <button mat-icon-button aria-label="Mois prÃ©cÃ©dent" (click)="prevMonth()">
        <mat-icon>chevron_left</mat-icon>
      </button>

      <h1 class="cal__title">
        <span class="cal__title--month">{{ fmt(currentMonth(),'MMMM') | titlecase }}</span>
        <span class="cal__title--year">{{ fmt(currentMonth(),'yyyy') }}</span>
      </h1>

      <div class="cal__actions">
        <button mat-stroked-button (click)="thisMonth()">Aujourdâ€™hui</button>
        <button mat-icon-button aria-label="Mois suivant" (click)="nextMonth()">
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>
    </header>

    <div class="cal__grid" role="grid" aria-label="Calendrier mensuel">
      <div class="cal__dow" *ngFor="let d of ['Lun','Mar','Mer','Jeu','Ven','Sam','Dim']">{{ d }}</div>

      <ng-container *ngFor="let week of weeks()">
        <button
          class="cal__cell"
          *ngFor="let day of week"
          role="gridcell"
          [class.-out]="!isSameMonth(day)"
          [class.-today]="isToday(day)"
          (click)="openDayTasks(day)"
        >
          <div class="cal__cell-head">
            <span class="cal__day">{{ fmt(day,'d') }}</span>
            <span class="cal__today-pill" *ngIf="isToday(day)">Aujourdâ€™hui</span>
          </div>

          <ul class="cal__tasks">
            <li
              *ngFor="let t of dayTasks(day) | slice:0:2"
              class="cal__task"
              [ngClass]="{
                '-water': t.type === 'WATER_CHANGE',
                '-fert':  t.type === 'FERTILIZATION',
                '-trim':  t.type === 'TRIM',
                '-test':  t.type === 'WATER_TEST'
              }"
              [title]="t.title + (t.aquarium?.name ? ' â€“ ' + t.aquarium?.name : '')"
            >
              <span class="dot"></span>
              <span class="txt">{{ t.title }}</span>
            </li>

            <li *ngIf="dayTasks(day).length > 2" class="cal__more">
              +{{ dayTasks(day).length - 2 }}â€¦
            </li>
          </ul>
        </button>
      </ng-container>
    </div>
  </section>
</div>

<!-- ===== Footer ===== -->
<footer class="footer">
  <div class="footer-content">
    <div class="footer-brand">
      <img src="/Logo_AquaManger.png" alt="AquaManager" class="footer-logo" />
      <p class="footer-desc">
        AquaManager â€“ Suivez, entretenez et sublimez vos aquariums en toute simplicitÃ© ğŸŒ¿ğŸ 
      </p>
    </div>

    <div class="footer-links">
      <h3>Navigation</h3>
      <ul>
        <li><a routerLink="/home">Accueil</a></li>
        <li><a routerLink="/aquariums">Mes aquariums</a></li>
        <li><a routerLink="/calendar">Calendrier</a></li>
        <li><a routerLink="/profile">Profil</a></li>
      </ul>
    </div>

    <div class="footer-social">
      <h3>Suivez-nous</h3>
      <div class="social-icons">
        <a href="#" aria-label="Facebook"><mat-icon>facebook</mat-icon></a>
        <a href="#" aria-label="Instagram"><mat-icon>photo_camera</mat-icon></a>
        <a href="#" aria-label="Twitter"><mat-icon>alternate_email</mat-icon></a>
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="footer-bottom">
    <p>Â© {{ today.getFullYear() }} AquaManager â€” Tous droits rÃ©servÃ©s</p>
    <a href="#" class="footer-policy">Mentions lÃ©gales</a>
  </div>
</footer>
