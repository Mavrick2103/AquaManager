<section class="toolbar">
  <a class="brand" [routerLink]="['/aquariums']">
    <mat-icon>arrow_back</mat-icon>
    <span>Retour</span>
  </a>

  <h1>Fiche aquarium</h1>

  <div class="actions">
    <button mat-stroked-button color="warn" type="button"
            (click)="remove()" [disabled]="saving">
      <mat-icon>delete</mat-icon>
      <span>Supprimer</span>
    </button>

    <button mat-raised-button type="button" class="btn-primary"
            (click)="save()" [disabled]="saving || form.invalid">
      <mat-icon>save</mat-icon>
      <span>Enregistrer</span>
    </button>
  </div>
</section>

<ng-container *ngIf="!loading; else loader">
  <mat-card class="sheet">
    <mat-card-header>
      <div class="title">
        <div class="name-row">
          <span class="name">{{ form.value.name || '—' }}</span>
          <span class="liters">~ {{ liters }} L</span>
        </div>
        <mat-chip-set>
          <mat-chip [ngClass]="form.value.waterType === 'EAU_DE_MER' ? 'chip-mer' : 'chip-douce'">
            {{ form.value.waterType === 'EAU_DE_MER' ? 'Eau de mer' : 'Eau douce' }}
          </mat-chip>
        </mat-chip-set>
      </div>
    </mat-card-header>

    <mat-divider></mat-divider>

    <mat-card-content>
      <form [formGroup]="form" class="grid">
        <mat-form-field appearance="outline">
          <mat-label>Nom</mat-label>
          <input matInput formControlName="name" />
          <mat-hint align="end">{{ form.get('name')?.value?.length || 0 }}/255</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Type d’eau</mat-label>
          <mat-select formControlName="waterType">
            <mat-option value="EAU_DOUCE">Eau douce</mat-option>
            <mat-option value="EAU_DE_MER">Eau de mer</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Longueur (cm)</mat-label>
          <input matInput type="number" formControlName="lengthCm" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Largeur (cm)</mat-label>
          <input matInput type="number" formControlName="widthCm" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Hauteur (cm)</mat-label>
          <input matInput type="number" formControlName="heightCm" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Date de mise en eau</mat-label>
          <input matInput type="date" formControlName="startDate" />
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</ng-container>

<ng-template #loader>
  <div class="loading">
    <mat-progress-spinner diameter="56"></mat-progress-spinner>
  </div>
</ng-template>
